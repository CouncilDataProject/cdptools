

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>cdptools.legistar_utils package &mdash; cdptools 2.0.6 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="cdptools.pipelines package" href="cdptools.pipelines.html" />
    <link rel="prev" title="cdptools.indexers package" href="cdptools.indexers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> cdptools
          

          
          </a>

          
            
            
              <div class="version">
                2.0.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="system_design.html">Backend Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#index">Index</a><ul>
<li class="toctree-l3"><a class="reference internal" href="system_design.html#id1">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="system_design.html#id3">Modules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#id4">Event Scrapers</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#id5">File Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#id6">Audio Splitters</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#id7">Databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#id8">Speech Recognition Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#id9">Indexers</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_design.html#id10">Pipelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="system_design.html#id11">Why not Airflow</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="transcript_formats.html">Transcript Format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="transcript_formats.html#index">Index</a><ul>
<li class="toctree-l3"><a class="reference internal" href="transcript_formats.html#id1">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="transcript_formats.html#id2">Formats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="transcript_formats.html#format-raw">Format: Raw</a></li>
<li class="toctree-l2"><a class="reference internal" href="transcript_formats.html#format-timestamped-words">Format: Timestamped Words</a></li>
<li class="toctree-l2"><a class="reference internal" href="transcript_formats.html#format-timestamped-sentences">Format: Timestamped Sentences</a></li>
<li class="toctree-l2"><a class="reference internal" href="transcript_formats.html#format-timestamped-speaker-turns">Format: Timestamped Speaker Turns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="transcript_formats.html#id3">Notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="deployment_instructions.html">Deploying and Running CDP Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="deployment_instructions.html#index">Index</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deployment_instructions.html#id2">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="deployment_instructions.html#id4">Module Choices</a></li>
<li class="toctree-l3"><a class="reference internal" href="deployment_instructions.html#id5">Back-end Hosting</a></li>
<li class="toctree-l3"><a class="reference internal" href="deployment_instructions.html#id7">Configuration and Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="deployment_instructions.html#id10">Local Development Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment_instructions.html#id11">Production Server Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="deployment_instructions.html#id13">Running Pipelines</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#stable-release">Stable release</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#from-sources">From sources</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Package modules</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="cdptools.html">cdptools package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="cdptools.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="cdptools.audio_splitters.html">cdptools.audio_splitters package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.bin.html">cdptools.bin package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.databases.html">cdptools.databases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.dev_utils.html">cdptools.dev_utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.event_scrapers.html">cdptools.event_scrapers package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.file_stores.html">cdptools.file_stores package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.indexers.html">cdptools.indexers package</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">cdptools.legistar_utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.pipelines.html">cdptools.pipelines package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.research_utils.html">cdptools.research_utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cdptools.sr_models.html">cdptools.sr_models package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cdptools.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="cdptools.html#module-cdptools.cdp_instance">cdptools.cdp_instance module</a></li>
<li class="toctree-l3"><a class="reference internal" href="cdptools.html#module-cdptools.configs">cdptools.configs module</a></li>
<li class="toctree-l3"><a class="reference internal" href="cdptools.html#module-cdptools">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#get-started">Get Started!</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#deploying">Deploying</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#unreleased">(unreleased)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#v2-0-6-2020-10-18">v2.0.6 (2020-10-18)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#new">New</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#fix">Fix</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#other">Other</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#v2-0-5-2020-03-07">v2.0.5 (2020-03-07)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id9">New</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id12">Fix</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id20">Other</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#v2-0-4-2019-12-31">v2.0.4 (2019-12-31)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id28">New</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id32">Fix</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id34">Other</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cdptools</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">cdptools</a> &raquo;</li>
        
          <li><a href="cdptools.html">cdptools package</a> &raquo;</li>
        
      <li>cdptools.legistar_utils package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/cdptools.legistar_utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="cdptools.pipelines.html" class="btn btn-neutral float-right" title="cdptools.pipelines package" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cdptools.indexers.html" class="btn btn-neutral float-left" title="cdptools.indexers package" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cdptools-legistar-utils-package">
<h1>cdptools.legistar_utils package<a class="headerlink" href="#cdptools-legistar-utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-cdptools.legistar_utils.events">
<span id="cdptools-legistar-utils-events-module"></span><h2>cdptools.legistar_utils.events module<a class="headerlink" href="#module-cdptools.legistar_utils.events" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cdptools.legistar_utils.events.AgendaMatchResults">
<em class="property">class </em><code class="sig-prename descclassname">cdptools.legistar_utils.events.</code><code class="sig-name descname">AgendaMatchResults</code><span class="sig-paren">(</span><em class="sig-param">selected_event: Dict</em>, <em class="sig-param">match_scores: Dict</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cdptools/legistar_utils/events.html#AgendaMatchResults"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cdptools.legistar_utils.events.AgendaMatchResults" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>

<dl class="function">
<dt id="cdptools.legistar_utils.events.get_legistar_events_for_timespan">
<code class="sig-prename descclassname">cdptools.legistar_utils.events.</code><code class="sig-name descname">get_legistar_events_for_timespan</code><span class="sig-paren">(</span><em class="sig-param">client: str</em>, <em class="sig-param">begin: datetime.datetime = datetime.datetime(2020</em>, <em class="sig-param">11</em>, <em class="sig-param">23</em>, <em class="sig-param">19</em>, <em class="sig-param">4</em>, <em class="sig-param">2</em>, <em class="sig-param">950851)</em>, <em class="sig-param">end: datetime.datetime = datetime.datetime(2020</em>, <em class="sig-param">11</em>, <em class="sig-param">24</em>, <em class="sig-param">19</em>, <em class="sig-param">4</em>, <em class="sig-param">2</em>, <em class="sig-param">950854)</em>, <em class="sig-param">store_each_response: bool = False</em><span class="sig-paren">)</span> &#x2192; List[Dict]<a class="reference internal" href="_modules/cdptools/legistar_utils/events.html#get_legistar_events_for_timespan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cdptools.legistar_utils.events.get_legistar_events_for_timespan" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all legistar events and each events minutes items, people, and votes, for a
client for a given timespan.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client</strong> (<em>str</em>) – Which legistar client to target. Ex: “seattle”</p></li>
<li><p><strong>begin</strong> (<em>datetime</em>) – The timespan beginning datetime to query for events after.</p></li>
<li><p><strong>end</strong> (<em>datetime</em>) – The timespan end datetime to query for events before.</p></li>
<li><p><strong>store_each_response</strong> (<em>bool</em>) – Option to store each response as they come in. Used to store the data for
testing the event gather pipeline.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>events</strong> – All legistar events that occur between the datetimes provided for the client
provided. Additionally, requests and attaches agenda items, minutes items, any
attachments, called “EventItems”, requests votes for any of these “EventItems”,
and requests person information for any vote.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[Dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cdptools.legistar_utils.events.get_matching_legistar_event_by_minutes_match">
<code class="sig-prename descclassname">cdptools.legistar_utils.events.</code><code class="sig-name descname">get_matching_legistar_event_by_minutes_match</code><span class="sig-paren">(</span><em class="sig-param">minutes_items_provided: List[str], legistar_events: List[Dict]</em><span class="sig-paren">)</span> &#x2192; cdptools.legistar_utils.events.AgendaMatchResults<a class="reference internal" href="_modules/cdptools/legistar_utils/events.html#get_matching_legistar_event_by_minutes_match"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cdptools.legistar_utils.events.get_matching_legistar_event_by_minutes_match" title="Permalink to this definition">¶</a></dt>
<dd><p>Provided a list of strings that represent “display name” minutes items, find the
closest matching legistar event for the list provided. An example of this function
being used may be found in SeattleEventScraper, but as a general use case, this
will be used when a city has two separate systems for storing video and storing
legistar data and you need to match up the video data with the legistar data. Event
matching is determined by minutes item text set difference. For details, on that
algorithm, look at <cite>rapidfuzz.fuzz.token_set_ratio</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>minutes_items_provided</strong> (<em>List[str]</em>) – The minutes items provided from the non-legistar system.</p></li>
<li><p><strong>legistar_events</strong> (<em>List[Dict]</em>) – The legistar events list produced from <cite>get_legistar_events_for_timespan</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>match_details</strong> – An object to store the match results. Which contains an attribute for the
highest matching and then the scores for the rest of the checked event.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#cdptools.legistar_utils.events.AgendaMatchResults" title="cdptools.legistar_utils.events.AgendaMatchResults">AgendaMatchResults</a></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="cdptools.legistar_utils.events.parse_legistar_event_details">
<code class="sig-prename descclassname">cdptools.legistar_utils.events.</code><code class="sig-name descname">parse_legistar_event_details</code><span class="sig-paren">(</span><em class="sig-param">legistar_event_details: Dict</em>, <em class="sig-param">ignore_minutes_items: List[str] = []</em><span class="sig-paren">)</span> &#x2192; Dict<a class="reference internal" href="_modules/cdptools/legistar_utils/events.html#parse_legistar_event_details"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cdptools.legistar_utils.events.parse_legistar_event_details" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the full legistar event details and format into the CDP ready JSON dictionary
for upload.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>legistar_event_details</strong> (<em>Dict</em>) – The full legistar event details with source and video URIs added.</p></li>
<li><p><strong>ignore_minutes_items</strong> (<em>List[str]</em>) – It is fairly common to have minutes items that can be ignored. Any strings
added to this list will be dropped during the formatting of the CDP ready JSON
object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>formatted</strong> – The parsed and CDP storage ready formatted JSON object to upload.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-cdptools.legistar_utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-cdptools.legistar_utils" title="Permalink to this headline">¶</a></h2>
<p>Legistar utilities package for cdptools.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Jackson Maxfield Brown

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>